import json

import requests
from bs4 import BeautifulSoup

pc = json.load(open("airports.json", encoding="utf-8"))
vg = json.load(open("airports-china.json", encoding="utf-8"))

# vg = {}
names = {
#     "PEK":["北京", "首都"],
# "PVG":["上海", "浦东"],
# "CAN":["广州", "白云"],
# "CTU":["成都", "双流"],
# "SZX":["深圳", "宝安"],
# "KMG":["昆明", "长水"],
# "XIY":["西安", "咸阳"],
# "SHA":["上海", "虹桥"],
# "CKG":["重庆", "江北"],
# "HGH":["杭州", "萧山"],
# "NKG":["南京", "禄口"],
# "CGO":["郑州", "新郑"],
# "XMN":["厦门", "高崎"],
# "CSX":["长沙", "黄花"],
# "TAO":["青岛", "流亭"],
# "WUH":["武汉", "天河"],
# "HAK":["海口", "美兰"],
# "TSN":["天津", "滨海"],
# "URC":["乌鲁木齐地窝堡"],
# "HRB":["哈尔滨太平"],
# "KWE":["贵阳龙洞堡"],
# "SYX":["三亚", "凤凰"],
# "SHE":["沈阳", "桃仙"],
# "DLC":["大连", "周水子"],
# "TNA":["济南", "遥墙"],
# "NNG":["南宁", "吴圩"],
# "FOC":["福州", "长乐"],
# "LHW":["兰州", "中川"],
# "TYN":["太原", "武宿"],
# "KHN":["南昌", "昌北"],
# "CGQ":["长春", "龙嘉"],
# "HET":["呼和浩特", "白塔"],
# "NGB":["宁波", "栎社"],
# "SJW":["石家庄", "正定"],
# "ZUH":["珠海", "金湾"],
# "WNZ":["温州", "龙湾"],
# "HFE":["合肥", "新桥"],
# "INC":["银川", "河东"],
# "KWL":["桂林", "两江"],
# "YNT":["烟台", "蓬莱"],
# "LJG":["丽江", "三义"],
# "JJN":["泉州", "晋江"],
# "WUX":["苏南", "硕放"],
# "NAY":["北京", "南苑"],
# "SWA":["揭阳", "潮汕"],
# "XNN":["西宁", "曹家堡"],
# "JHG":["西双版纳", "嘎洒"],
# "LXA":["拉萨", "贡嘎"],
# "MIG":["绵阳", "南郊"],
# "CZX":["常州", "奔牛"],
# "YIH":["宜昌", "三峡"],
# "NTG":["南通", "兴东"],
# "ZHA":["湛江", "坡头"],
# "XUZ":["徐州", "观音"],
# "WEH":["威海", "大水泊"],
# "DSN":["鄂尔多斯", "伊金霍洛"],
# "YTY":["扬州", "泰州"],
# "HLD":["呼伦贝尔", "海拉尔"],
# "BHY":["北海", "福成"],
# "DYG":["张家界", "荷花"],
# "UYN":["榆林", "榆阳"],
# "KHG":["喀什"],
# "YCU":["运城", "关公"],
# "ZYI":["遵义", "新舟"],
# "BAV":["包头", "东河"],
# "LYI":["临沂", "沭埠岭"],
# "HUZ":["惠州", "平潭"],
# "YNZ":["盐城", "南洋"],
# "LUM":["德宏", "芒市"],
# "DLU":["大理"],
# "KRL":["库尔勒"],
# "YIW":["义乌"],
# "KOW":["赣州", "黄金"],
# "CIF":["赤峰", "玉龙"],
"HIA":["淮安", "涟水"],
"LYG":["连云港", "白塔埠"],
"YNJ":["延吉", "朝阳川"],
"XFN":["襄阳", "刘集"],
"LZH":["柳州", "白莲"],
"YIN":["伊宁"],
"LYA":["洛阳", "北郊"],
"AKU":["阿克苏", "温宿"],
"TEN":["铜仁", "凤凰"],
"JNG":["济宁", "曲阜"],
"HTN":["和田"],
"BFJ":["毕节", "飞雄"],
"HSN":["舟山", "普陀山"],
"WDS":["十堰", "武当山"],
"TCZ":["腾冲", "驼峰"],
"ACX":["兴义", "万峰林"],
"HYN":["台州", "路桥"],
"ENH":["恩施", "许家坪"],
"DAT":["大同", "云冈"],
"BSD":["保山", "云瑞"],
"WMT":["遵义", "茅台"],
"TGO":["通辽"],
"YBP":["宜宾", "菜坝"],
"NAO":["南充", "高坪"],
"MDG":["牡丹江", "海浪"],
"NNY":["南阳", "姜营"],
"RIZ":["日照", "山字河"],
"WXN":["万州", "五桥"],
"JMU":["佳木斯", "东郊"],
"DQA":["大庆", "萨尔图"],
"HNY":["衡阳", "南岳"],
"FUG":["阜阳", "西关"],
"HDG":["邯郸"],
"TXN":["黄山", "屯溪"],
"DNH":["敦煌"],
"HLH":["乌兰浩特", "义勒力特"],
"CGD":["常德", "桃花源"],
"WEF":["潍坊"],
"DOY":["东营", "胜利"],
"CIH":["长治", "王村"],
"XIC":["西昌", "青山"],
"JGS":["井冈山"],
"WUS":["武夷山"],
"SYM":["普洱", "思茅"],
"YIC":["宜春", "明月山"],
"XIL":["锡林浩特"],
"DIG":["迪庆", "香格里拉"],
"KRY":["克拉玛依"],
"TVS":["唐山", "三女河"],
"JGN":["嘉峪关"],
"BAR":["琼海", "博鳌"],
"NBS":["长白山"],
"JDZ":["景德镇", "罗家"],
"DAX":["达州", "河市"],
"MXZ":["梅县", "长岗岌"],
"HJJ":["怀化", "芷江"],
"HZG":["汉中", "城固"],
"LZY":["林芝", "米林"],
"WUA":["乌海"],
"AQG":["安庆", "天柱山"],
"WGN":["邵阳", "武冈"],
"JUH":["池州", "九华山"],
"AVA":["安顺", "黄果树"],
"LNJ":["临沧"],
"CDE":["承德", "普宁"],
"LPF":["六盘水", "月照"],
"NZH":["满洲里", "西郊"],
"IQN":["庆阳"],
"BPE":["秦皇岛", "北戴河"],
"JIQ":["黔江", "武陵山"],
"NDG":["齐齐哈尔", "三家子"],
"HMI":["哈密"],
"AAT":["阿勒泰"],
"UCB":["乌兰察布", "集宁"],
"LFQ":["临汾", "乔李"],
"ZQZ":["张家口", "宁远"],
"ENY":["延安", "南泥湾"],
"PZI":["攀枝花", "保安营"],
"SQD":["上饶", "三清山"],
"LLV":["吕梁", "大武"],
"RLK":["巴彦淖尔", "天吉泰"],
"ZAT":["昭通"],
"WUT":["忻州", "五台山"],
"BPX":["昌都", "邦达"],
"KCA":["库车", "龟兹"],
"YUS":["玉树", "巴塘"],
"YKH":["营口", "兰旗"],
"JNZ":["锦州湾"],
"TCG":["塔城"],
"AOG":["鞍山", "腾鳌"],
"GYS":["广元", "盘龙"],
"JUZ":["衢州"],
"LLF":["永州", "零陵"],
"ZHY":["中卫", "沙坡头"],
"DCY":["稻城", "亚丁"],
"LZO":["泸州", "云龙"],
"JMJ":["澜沧", "景迈"],
"GYU":["固原", "六盘山"],
"JXA":["鸡西", "兴凯湖"],
"QSZ":["莎车", "叶尔羌"],
"ERL":["二连浩特", "赛乌苏"],
"LCX":["龙岩", "冠豸山"],
"SQJ":["三明", "沙县"],
"TLQ":["吐鲁番", "交河"],
"GOQ":["格尔木"],
"LLB":["荔波"],
"HEK":["黑河", "瑷珲"],
"AEB":["百色", "巴马"],
"THQ":["天水", "麦积山"],
"YZY":["张掖", "甘州"],
"JIC":["金昌", "金川"],
"CHG":["朝阳"],
"SHF":["石河子", "花园"],
"BPL":["博乐", "阿拉山口"],
"AXF":["阿拉善左旗", "巴彦浩特"],
"CWJ":["沧源", "佤山"],
"NLH":["宁蒗", "泸沽湖"],
"LDS":["伊春", "林都"],
"WNH":["文山", "普者黑"],
"YSQ":["松原", "查干湖"],
"JGD":["加格达奇"],
"LNL":["陇南", "成县"],
"KJH":["凯里", "黄平"],
"NZL":["扎兰屯", "成吉思汗"],
"GMQ":["果洛", "玛沁"],
"GXH":["甘南", "夏河"],
"TNH":["通化", "三源浦"],
"FUO":["佛山", "沙堤"],
"HXD":["德令哈"],
"YIE":["阿尔山", "伊尔施"],
# "XAI":["信阳", "明港"],
"HUO":["霍林郭勒", "霍林河"],
"DBC":["白城", "长安"],
"KGT":["甘孜", "康定"],
"DDG":["丹东", "浪头"],
"JSJ":["建三江", "湿地"],
"HLE":["新源", "那拉提"],
"RKZ":["日喀则", "和平"],
"OHE":["漠河", "古莲"],
"HTT":["茫崖", "花土沟"],
"NGQ":["阿里", "昆莎"],
"IQM":["且末", "玉都"],
"KJI":["布尔津", "喀纳斯"],
"FYJ":["抚远", "东极"],
# "YXG":["三沙", "永兴"],
# "HZH":["黎平"],
"DTU":["五大连池", "德都"],
# "RQA":["若羌", "楼兰"],
"AHJ":["阿坝", "红原"],
"FYN":["富蕴", "可可托海"],
"HCJ":["河池", "金城江"],
"JZH":["九寨", "黄龙"],
"EJN":["额济纳旗", "桃来"],
"HPG":["神农架", "红坪"],
# "HBQ":["海北", "祁连"],
"RHT":["阿拉善右旗", "巴丹吉林"],
"CNI":["长海", "大长山岛"],
"YYA":["岳阳", "三荷"],
# "TWC":["图木舒克", "唐王城"],
"AKA":["安康", "五里铺"],
"WUZ":["梧州", "西江"]}
for u in names:
    if u not in vg:
        # continue
        print(u)
        c = BeautifulSoup(requests.get("http://www.gcmap.com/airport/{0}".format(u)).text)
        lat = c.find("abbr", class_="latitude")["title"]
        lng = c.find("abbr", class_="longitude")["title"]
        name = names[u]
        if u not in pc:
            pc[u] = {        }
        pc[u]['IATA'] = u
        pc[u]['name'] = "".join(name)
        pc[u]['city'] = name[0]
        pc[u]['latitude'] = float(lat)
        pc[u]['longitude'] = float(lng)
        vg[u] = pc[u]
    vg[u]['country'] = "中国"
    vg[u]['timezone'] = "Asia/Shanghai"
    pc[u]['country'] = "中国"
    pc[u]['timezone'] = "Asia/Shanghai"
    json.dump(pc, open("airports.json", "w", encoding="utf-8"), sort_keys=True, indent=4, ensure_ascii=False)
    json.dump(vg, open("airports-china.json", "w", encoding="utf-8"), sort_keys=True, indent=4, ensure_ascii=False)
